{% extends "admin/layout.html" %}

{% block title %}Edit User: {{ user.name }}{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto">
    <div class="flex items-center justify-between mb-8">
        <h1 class="text-3xl font-bold font-orbitron text-white flex items-center gap-3">
            <a href="/admin/users" class="text-gray-500 hover:text-white transition-colors text-xl">‚Üê</a>
            Edit User: <span class="text-blue-400">{{ user.name }}</span>
        </h1>

        <form method="POST" action="/admin/users/{{ user.id }}/delete"
            onsubmit="return confirm('Are you sure you want to PERMANENTLY DELETE this user? This action cannot be undone.');">
            <button type="submit"
                class="bg-red-500/10 hover:bg-red-500/20 text-red-500 border border-red-500/30 px-4 py-2 rounded uppercase font-bold text-xs tracking-wider transition-colors">
                Delete Account
            </button>
        </form>
    </div>

    <form method="POST" action="/admin/users/{{ user.id }}" class="space-y-8">

        <!-- Account Settings -->
        <div class="bg-black/40 border border-gray-800 rounded-xl p-6">
            <h2 class="text-xl font-bold font-orbitron text-white mb-6 border-b border-gray-800 pb-2">Account Settings
            </h2>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label class="block text-gray-400 text-sm uppercase font-bold mb-2">Username</label>
                    <input type="text" value="{{ user.name }}" disabled
                        class="w-full bg-gray-900 border border-gray-700 rounded p-3 text-gray-500 cursor-not-allowed">
                </div>

                <div>
                    <label class="block text-gray-400 text-sm uppercase font-bold mb-2">Password (Reset)</label>
                    <input type="text" name="password" placeholder="Leave empty to keep current"
                        class="w-full bg-gray-900 border border-gray-700 rounded p-3 text-white focus:border-blue-500 focus:outline-none">
                </div>

                <div class="flex items-center gap-4">
                    <div class="flex items-center">
                        <input type="checkbox" name="is_admin" id="is_admin" {% if user.is_admin %}checked{% endif %}
                            class="w-5 h-5 rounded border-gray-700 bg-gray-900 text-blue-600 focus:ring-blue-500 focus:ring-offset-gray-900">
                        <label for="is_admin" class="ml-2 text-gray-300 font-bold uppercase text-sm">Is Admin</label>
                    </div>
                </div>
            </div>
        </div>

        <!-- Resources & Stats -->
        <div class="bg-black/40 border border-gray-800 rounded-xl p-6">
            <h2 class="text-xl font-bold font-orbitron text-white mb-6 border-b border-gray-800 pb-2">Resources & Stats
            </h2>

            <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
                <div>
                    <label class="block text-yellow-500 text-sm uppercase font-bold mb-2">Gold</label>
                    <input type="number" name="gold" value="{{ user.gold }}"
                        class="w-full bg-gray-900 border border-yellow-500/30 rounded p-3 text-white focus:border-yellow-500 focus:outline-none"
                        required>
                </div>

                <div>
                    <label class="block text-blue-400 text-sm uppercase font-bold mb-2">Diamonds</label>
                    <input type="number" name="diamonds" value="{{ user.diamonds }}"
                        class="w-full bg-gray-900 border border-blue-400/30 rounded p-3 text-white focus:border-blue-400 focus:outline-none"
                        required>
                </div>

                <div>
                    <label class="block text-gray-400 text-sm uppercase font-bold mb-2">Level</label>
                    <input type="number" name="level" value="{{ user.level }}"
                        class="w-full bg-gray-900 border border-gray-700 rounded p-3 text-white focus:border-blue-500 focus:outline-none"
                        required>
                </div>

                <div>
                    <label class="block text-gray-400 text-sm uppercase font-bold mb-2">Experience</label>
                    <input type="number" name="exp" value="{{ user.xp }}"
                        class="w-full bg-gray-900 border border-gray-700 rounded p-3 text-white focus:border-blue-500 focus:outline-none"
                        required>
                </div>
            </div>
        </div>

        <!-- Teleport -->
        <div class="bg-black/40 border border-gray-800 rounded-xl p-6">
            <h2 class="text-xl font-bold font-orbitron text-white mb-6 border-b border-gray-800 pb-2">Teleport</h2>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                <div>
                    <label class="block text-gray-400 text-sm uppercase font-bold mb-2">Map ID</label>
                    <input type="text" name="map_id" value="{{ user.current_map_id }}"
                        class="w-full bg-gray-900 border border-gray-700 rounded p-3 text-white focus:border-blue-500 focus:outline-none"
                        required>
                </div>
                <div>
                    <label class="block text-gray-400 text-sm uppercase font-bold mb-2">X</label>
                    <input type="number" name="x" value="{{ user.position.x }}"
                        class="w-full bg-gray-900 border border-gray-700 rounded p-3 text-white focus:border-blue-500 focus:outline-none"
                        required>
                </div>
                <div>
                    <label class="block text-gray-400 text-sm uppercase font-bold mb-2">Y</label>
                    <input type="number" name="y" value="{{ user.position.y }}"
                        class="w-full bg-gray-900 border border-gray-700 rounded p-3 text-white focus:border-blue-500 focus:outline-none"
                        required>
                </div>
            </div>
        </div>

        <button type="submit"
            class="w-full py-4 bg-green-600 hover:bg-green-500 text-white font-bold font-orbitron uppercase tracking-widest rounded-xl transition-all shadow-[0_0_20px_rgba(22,163,74,0.3)] hover:shadow-[0_0_30px_rgba(22,163,74,0.5)]">
            Save Changes
        </button>
    </form>
</div>
{% endblock %}